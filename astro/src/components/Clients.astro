---
let clients = Astro.props.data;

let hoverPrev: boolean = false;
let hoverNext: boolean = false;

let slidesNo = Math.ceil(clients.length / 8);
let slideSelected = 0,
  slideMin = 0,
  slideMax = slidesNo - 1;

function createSlidesGroup() {
  let slides = [];
  for (let i = 0; i < clients.length; i += 8) {
    slides.push(clients.slice(i, i + 8));
  }
  return slides;
}

let slidesGroup = createSlidesGroup();
// console.log(
//   `SlidesGroup[${slideSelected}]: `,
//   JSON.stringify(slidesGroup[slideSelected])
// );
---

<div class='flex flex-col relative w-full'>
  <div class='flex flex-wrap w-full h-72 transition duration-200 ease-in-out'>
    {
      slidesGroup[slideSelected] &&
        slidesGroup[slideSelected].map((client: any) => (
          <a
            class='flex justify-center items-center pt-4 pb-4 m-0 cursor-pointer hover:bg-gray-200 w-1/4 h-36'
            href={`/work/case-studies?client=${client._id}`}
          >
            <div class='flex bg-transparent'>
              <img
                class='h-auto max-h-36'
                style='max-width: 148px'
                src={client.image.url}
                alt={client.name}
              />
            </div>
          </a>
        ))
    }
  </div>
</div>

<!-- Back Button -->
<div class='flex absolute top-0 left-12 w-12 h-full'>
  <a
    class='flex relative w-12 h-full z-50 justify-center items-center cursor-pointer'
    onclick='incrementSlide(-1,slideSelected, slideMin, slideMax)'
    onmouseenter='setHoverPrev(true)'
    onmouseleave='setHoverPrev(false)'
  >
    {
      hoverPrev === true ? (
        <div class='flex font-light justify-center items-center text-sm text-white bg-gray-500 rounded-full w-8 h-8'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 20 20'
            fill='currentColor'
          >
            <path
              fill-rule='evenodd'
              d='M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z'
              clip-rule='evenodd'
            />
          </svg>
        </div>
      ) : (
        <div class='flex font-light justify-center items-center text-sm text-white bg-indigo-800 rounded-full w-8 h-8'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 20 20'
            fill='currentColor'
          >
            <path
              fill-rule='evenodd'
              d='M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z'
              clip-rule='evenodd'
            />
          </svg>
        </div>
      )
    }
  </a>
</div>

<!-- Forward Button -->
<div class='flex absolute top-0 right-12 w-12 h-full'>
  <div
    class='flex relative w-12 h-full z-50 justify-center items-center cursor-pointer'
    onclick='incrementSlide(1,slideSelected, slideMin, slideMax)'
    onmouseenter='setHoverNext(true)'
    onmouseleave='setHoverNext(false)'
  >
    {
      hoverNext === true ? (
        <div class='flex font-light justify-center items-center text-sm text-white bg-gray-500 rounded-full w-8 h-8'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 20 20'
            fill='currentColor'
          >
            <path
              fill-rule='evenodd'
              d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z'
              clip-rule='evenodd'
            />
          </svg>
        </div>
      ) : (
        <div class='flex font-light justify-center items-center text-sm text-white bg-indigo-800 rounded-full w-8 h-8'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            viewBox='0 0 20 20'
            fill='currentColor'
          >
            <path
              fill-rule='evenodd'
              d='M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z'
              clip-rule='evenodd'
            />
          </svg>
        </div>
      )
    }
  </div>
</div>

<!-- Row of Buttons -->
<!-- <div class='flex flex-row relative w-full h-12 justify-center items-end'>
  {
    indexOfSlide === selectedSlide ? (
      <a
        class='flex font-light justify-center items-center text-xs bg-indigo-800 rounded-full w-3 h-3 mx-2 cursor-pointer'
        onclick='updateSelectedSlide(indexOfSlide)'
      />
    ) : (
      <a
        class='flex font-light justify-center items-center text-xs bg-gray-300 hover:bg-gray-500 rounded-full w-3 h-3 mx-2 cursor-pointer transition duration-200 ease-in-out'
        onclick='updateSelectedSlide(indexOfSlide)'
      />
    )
  } -->

<script is:inline>
  function incrementSlide(increment, slideSelected, slideMin, slideMax) {
    console.log({ increment, slideSelected, slideMin, slideMax });
    slideSelected += increment;
    if (slideSelected < slideMin) {
      slideSelected = slideMin;
    } else if (slideSelected > slideMax) {
      slideSelected = slideMax;
    }
    console.log({ slideSelected });
    return slideSelected;
  }

  function setHoverPrev(status) {
    let hoverPrev = status;
    console.log({ hoverPrev });
    return hoverPrev;
  }

  function setHoverNext(status) {
    let hoverNext = status;
    console.log({ hoverNext });
    return hoverNext;
  }
</script>
